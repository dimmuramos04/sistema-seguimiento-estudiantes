{% extends "base.html" %}

{% block title %}Registrar Nuevo Estudiante{% endblock %}

{% block content %}
<h1>Registrar Nuevo Estudiante</h1>

<form method="POST" action="{{ url_for('nuevo_estudiante') }}" novalidate>
    {{ form.hidden_tag() }} {# Token de seguridad CSRF #}

    <fieldset>
        <legend>Datos de Identificación</legend>
        <div class="form-group">
            {{ form.rut.label }}
            {{ form.rut(class="form-control") }}
            {% for error in form.rut.errors %}<p style="color: red; font-size: 0.9em;">{{ error }}</p>{% endfor %}
        </div>
        <div class="form-group">
            {{ form.nombre.label }}
            {{ form.nombre(class="form-control") }}
            {% for error in form.nombre.errors %}<p style="color: red; font-size: 0.9em;">{{ error }}</p>{% endfor %}
        </div>
        <div class="form-group">
            {{ form.apellido_paterno.label }}
            {{ form.apellido_paterno(class="form-control") }}
            {% for error in form.apellido_paterno.errors %}<p style="color: red; font-size: 0.9em;">{{ error }}</p>{% endfor %}
        </div>
        <div class="form-group">
            {{ form.apellido_materno.label }}
            {{ form.apellido_materno(class="form-control") }}
            {% for error in form.apellido_materno.errors %}<p style="color: red; font-size: 0.9em;">{{ error }}</p>{% endfor %}
        </div>
        <div class="form-group">
            {{ form.sexo.label }}
            {{ form.sexo(class="form-control") }}
            {% for error in form.sexo.errors %}<p style="color: red;">{{ error }}</p>{% endfor %}
        </div>
        <div class="form-group">
            {{ form.genero.label }}
            {{ form.genero(class="form-control") }}
            {% for error in form.genero.errors %}<p style="color: red; font-size: 0.9em;">{{ error }}</p>{% endfor %}
        </div>
    </fieldset>

    <fieldset>
        <legend>Antecedentes Personales</legend>
        <div class="form-group">
            {{ form.fecha_nacimiento.label }}
            {{ form.fecha_nacimiento(class="form-control") }}
            {% for error in form.fecha_nacimiento.errors %}<p style="color: red; font-size: 0.9em;">{{ error }}</p>{% endfor %}
        </div>
        <div class="form-group">
            {{ form.nacionalidad.label }}
            {{ form.nacionalidad(class="form-control") }}
            {% for error in form.nacionalidad.errors %}<p style="color: red; font-size: 0.9em;">{{ error }}</p>{% endfor %}
        </div>
        <div class="form-group">
            {{ form.estado_civil.label }}
            {{ form.estado_civil(class="form-control") }}
            {% for error in form.estado_civil.errors %}<p style="color: red; font-size: 0.9em;">{{ error }}</p>{% endfor %}
        </div>
        <div class="form-group">
            {{ form.tiene_hijos.label }}
            {{ form.tiene_hijos(class="form-control") }}
            {% for error in form.tiene_hijos.errors %}<p style="color: red; font-size: 0.9em;">{{ error }}</p>{% endfor %}
        </div>
        <div class="form-group">
            {{ form.ocupacion_laboral.label }}
            {{ form.ocupacion_laboral(class="form-control") }}
            {% for error in form.ocupacion_laboral.errors %}<p style="color: red; font-size: 0.9em;">{{ error }}</p>{% endfor %}
        </div>
        <div class="form-group">
            {{ form.residencia_academica.label }}
            {{ form.residencia_academica(class="form-control") }}
            {% for error in form.residencia_academica.errors %}<p style="color: red; font-size: 0.9em;">{{ error }}</p>{% endfor %}
        </div>
        <div class="form-group">
            {{ form.residencia_familiar.label }}
            {{ form.residencia_familiar(class="form-control") }}
            {% for error in form.residencia_familiar.errors %}<p style="color: red; font-size: 0.9em;">{{ error }}</p>{% endfor %}
        </div>
        <div class="form-group">
            {{ form.celular.label }}
            {{ form.celular(class="form-control") }}
            {% for error in form.celular.errors %}<p style="color: red; font-size: 0.9em;">{{ error }}</p>{% endfor %}
        </div>
    </fieldset>
    <fieldset>
        <legend>Red de Apoyo / Contacto de Emergencia</legend>
        <div class="form-group">
            {{ form.nombre_contacto_emergencia.label }}
            {{ form.nombre_contacto_emergencia(class="form-control") }}
        </div>
        <div class="form-group">
            {{ form.parentesco_contacto_emergencia.label }}
            {{ form.parentesco_contacto_emergencia(class="form-control") }}
        </div>
        <div class="form-group">
            {{ form.telefono_contacto_emergencia.label }}
            {{ form.telefono_contacto_emergencia(class="form-control") }}
        </div>
    </fieldset>

    <fieldset>
        <legend>Antecedentes Académicos y del Programa</legend>
        <div class="form-group">
            {{ form.carrera_programa.label }}
            {{ form.carrera_programa(class="form-control") }}
            {% for error in form.carrera_programa.errors %}<p style="color: red; font-size: 0.9em;">{{ error }}</p>{% endfor %}
        </div>
        <div class="form-group">
            {{ form.facultad.label }}
            {{ form.facultad(class="form-control") }}
            {% for error in form.facultad.errors %}<p style="color: red;">{{ error }}</p>{% endfor %}
        </div>
        <div class="form-group">
            {{ form.estado_academico.label }}
            {{ form.estado_academico(class="form-control") }}
            {% for error in form.estado_academico.errors %}<p style="color: red; font-size: 0.9em;">{{ error }}</p>{% endfor %}
        </div>
        <div class="form-group">
            {{ form.trabajadora_social.label }}
            {{ form.trabajadora_social(class="form-control") }}
            {% for error in form.trabajadora_social.errors %}<p style="color: red; font-size: 0.9em;">{{ error }}</p>{% endfor %}
        </div>
        <div class="form-group">
            {{ form.psicologo.label }}
            {{ form.psicologo(class="form-control") }}
            {% for error in form.psicologo.errors %}<p style="color: red; font-size: 0.9em;">{{ error }}</span>{% endfor %}
        </div>
        <div class="form-group">
            {{ form.fecha_ingreso.label }}
            {{ form.fecha_ingreso(class="form-control") }}
            {% for error in form.fecha_ingreso.errors %}<p style="color: red; font-size: 0.9em;">{{ error }}</p>{% endfor %}
        </div>
        <div class="form-group">
            {{ form.fuente_derivacion.label }}
            {{ form.fuente_derivacion(class="form-control") }}
            {% for error in form.fuente_derivacion.errors %}<p style="color: red;">{{ error }}</p>{% endfor %}
        </div>
        <div class="form-group">
            {{ form.estado_programa.label }}
            {{ form.estado_programa(class="form-control") }}
            {% for error in form.estado_programa.errors %}<p style="color: red; font-size: 0.9em;">{{ error }}</p>{% endfor %}
        </div>
    </fieldset>

    <fieldset>
        <legend>Información de Derivación CESFAM</legend>
        <div class="form-group">
            {{ form.fecha_derivacion.label }}
            {{ form.fecha_derivacion(class="form-control") }}
            {% for error in form.fecha_derivacion.errors %}<p style="color: red; font-size: 0.9em;">{{ error }}</p>{% endfor %}
        </div>
        <div class="form-group">
            {{ form.cesfam.label }}
            {{ form.cesfam(class="form-control") }}
            {% for error in form.cesfam.errors %}<p style="color: red; font-size: 0.9em;">{{ error }}</p>{% endfor %}
        </div>
        <div class="form-group">
            {{ form.tentativa_ideacion.label }}
            {{ form.tentativa_ideacion(class="form-control") }}
            {% for error in form.tentativa_ideacion.errors %}<p style="color: red; font-size: 0.9em;">{{ error }}</p>{% endfor %}
        </div>
    </fieldset>

    <fieldset>

        <legend>Nota Rápida / Alerta</legend>
        <div class="form-group">
            {{ form.nota_importante.label }}
            {{ form.nota_importante(class="form-control", rows=4, placeholder="Escriba aquí una nota importante o alerta que deba ser visible para todos los profesionales...") }}
            <small>Esta nota aparecerá destacada en la ficha del estudiante. Es opcional.</small>
        </div>
    </fieldset>
    <fieldset>
        <legend>Consentimientos</legend>
        <div class="form-group">
            {{ form.autoriza_investigacion(class="form-check-input") }}
            {{ form.autoriza_investigacion.label(class="form-check-label") }}
            <small style="display: block; margin-top: 5px;">Esta autorización es voluntaria y puede ser revocada en cualquier momento.</small>
        </div>
    </fieldset>

    <div class="form-group" style="margin-top: 20px;">
        {{ form.submit(class="button button-primary") }}
    </div>
</form>
{% endblock %}